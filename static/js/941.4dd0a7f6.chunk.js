"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[941],{1941:function(e,t,r){r.r(t),r.d(t,{default:function(){return X}});var n=r(5671),s=r(3144),o=r(136),i=r(5716),a=r(2791),l=r(7503),c="MyPosts_postsBlock__l6-8N",u="MyPosts_posts__Qgrk3",d={item:"Post_item__RX5g+"},f=r(184),h=function(e){return(0,f.jsx)("div",{className:d.posts,children:(0,f.jsxs)("div",{className:d.item,children:[(0,f.jsx)("img",{src:"https://www.vokrug.tv/pic/product/6/a/0/b/6a0bbf9e1e4b3c4564c562f91c6d43ec.jpeg",alt:"avatar"}),e.message,(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{children:"like"})," ",e.likesCount]})]})})},p=r(6139),m=r(704),x=r(5298),v=r(6854),j=(0,x.D)(10),_=a.memo((function(e){console.log("MyPostsRendered");var t=e.profilePage.posts.map((function(e,t){return(0,f.jsx)(h,{id:e.id,message:e.message,likesCount:e.likesCount},t)}));return(0,f.jsxs)("div",{className:c,children:[(0,f.jsx)("h3",{children:"My posts"}),(0,f.jsx)("div",{children:(0,f.jsx)(b,{onSubmit:function(t){e.addMyPost(t.newPostText)}})}),(0,f.jsx)("div",{className:u,children:t})]})})),b=(0,m.Z)({form:"ProfileAddNewPostForm"})((function(e){return(0,f.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,f.jsx)("div",{children:(0,f.jsx)(p.Z,{component:v.gx,name:"newPostText",validate:[x.C,j],placeholder:"Post message"})}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{children:"Add post"})})]})})),P=r(364),g=(0,P.$j)((function(e){return{profilePage:e.profilePage}}),(function(e){return{addMyPost:function(t){e((0,l.Wl)(t))}}}))(_),y=r(885),k="ProfileInfo_descriptionBlockRead__y9VbD",S="ProfileInfo_descriptionBlockEdit__vZTMv",Z="ProfileInfo_descriptionBlock__ApKsI",I="ProfileInfo_photoBlock__7GN2k",N="ProfileInfo_uploadPhoto__KWMuS",C="ProfileInfo_mainPhoto__NkNex",F="ProfileInfo_contact__ObFof",w="ProfileInfo_preloader__iQ6E0",M="ProfileInfo_disable__OFgSQ",A="ProfileInfo_profileDataBlock__pmRhf",B="ProfileInfo_fullNameBlock__Pahnk",D="ProfileInfo_editButton__t7HaE",U=r(6159),E=r(7516),O="ProfileDataForm_profileDataFormBlock__K77ql",T="ProfileDataForm_saveButtonBlock__Iobpe",G="ProfileDataForm_contact__ZAPMa",J="ProfileDataForm_formSummaryError__ZhSpF",R="ProfileDataForm_saveButton__gbAPC",q=(0,m.Z)({form:"edit-profile"})((function(e){var t=e.handleSubmit,r=e.profile,n=e.error;return(0,f.jsxs)("form",{onSubmit:t,className:O,children:[n&&(0,f.jsx)("div",{className:J,children:n}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Full name"}),": ",(0,v.Gr)("Full name","fullName",[],v.II)]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",(0,v.Gr)("","lookingForAJob",[],v.II,{type:"checkbox"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),": ",(0,v.Gr)("My professional skills","lookingForAJobDescription",[],v.gx)]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About me"}),": ",(0,v.Gr)("About me","aboutMe",[],v.gx)]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts"}),": ",Object.keys(r.contacts).map((function(e,t){return(0,f.jsxs)("div",{className:G,children:[(0,f.jsxs)("b",{children:[e,": "]})," ",(0,v.Gr)(e,"contacts."+e,[],v.II)]},t)}))]}),(0,f.jsx)("div",{className:T,children:(0,f.jsx)("button",{className:R,children:(0,f.jsx)("b",{children:"Save"})})})]})})),Q=function(e){var t=(0,a.useState)(!1),r=(0,y.Z)(t,2),n=r[0],s=r[1],o=(0,a.useState)(e.status),i=(0,y.Z)(o,2),l=i[0],c=i[1];(0,a.useEffect)((function(){c(e.status)}),[e.status]);return(0,f.jsx)("div",{children:n?(0,f.jsx)("div",{children:(0,f.jsx)("input",{autoFocus:!0,value:l,onBlur:function(){s(!n),e.updateUserStatus(l)},onChange:function(e){c(e.currentTarget.value)}})}):(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Status: "}),(0,f.jsx)("span",{onDoubleClick:function(){s(!n)},children:e.status})]})})},V=function(e){var t=e.isOwner,r=e.profile,n=e.status,s=e.updateUserStatus,o=e.savePhoto,i=e.saveProfile,l=(0,a.useState)(!1),c=(0,y.Z)(l,2),u=c[0],d=c[1],h=(0,a.useRef)(null);if(!r)return(0,f.jsx)("div",{className:w,children:(0,f.jsx)(U.p,{})});return(0,f.jsx)("div",{className:"".concat(!r&&M," ").concat(u?S:k),children:u?(0,f.jsx)(q,{initialValues:r,profile:r,onSubmit:function(e){i(e).then((function(){d(!u)}))}}):(0,f.jsxs)("div",{className:Z,children:[(0,f.jsx)(z,{profile:r,isOwner:t,goToEditMode:function(){return d(!u)}}),(0,f.jsxs)("div",{className:I,children:[(0,f.jsx)("img",{src:r.photos.large||E,alt:"ava",className:C}),t&&(0,f.jsxs)("div",{children:[(0,f.jsx)("button",{onClick:function(){var e;h&&(null===(e=h.current)||void 0===e||e.click())},className:N,children:"upload file"}),(0,f.jsx)("input",{style:{display:"none"},ref:h,type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&o(e.target.files[0])}})]}),(0,f.jsx)(Q,{status:n,updateUserStatus:s})]})]})})},z=function(e){var t=e.profile,r=e.isOwner,n=e.goToEditMode;return(0,f.jsxs)("div",{className:A,children:[(0,f.jsxs)("div",{className:B,children:[(0,f.jsx)("b",{children:t.fullName}),r&&(0,f.jsx)("button",{onClick:n,className:D,children:(0,f.jsx)("b",{children:"Edit"})})]}),(0,f.jsx)("div",{children:t.aboutMe}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(e,r){return(0,f.jsx)(K,{contactTitle:e,contactValue:t.contacts[e]},r)}))]})]})},K=function(e){var t=e.contactTitle,r=e.contactValue;return(0,f.jsxs)("div",{className:F,children:[(0,f.jsx)("b",{children:t}),": ",r]})},L=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsx)(V,{isOwner:e.isOwner,status:e.status,profile:e.profile,updateUserStatus:e.updateUserStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,f.jsx)(g,{})]})},H=r(9271),W=r(7781),$=function(e){(0,o.Z)(r,e);var t=(0,i.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,r){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)("div",{children:(0,f.jsx)(L,{isOwner:!this.props.match.params.userId,status:this.props.status,profile:this.props.profile,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})})}}]),r}(a.Component),X=(0,W.qC)((0,P.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:l.et,getUserStatus:l.Tq,updateUserStatus:l.OL,savePhoto:l.Ju,saveProfile:l.Ii}),H.EN)($)},6854:function(e,t,r){r.d(t,{gx:function(){return f},II:function(){return h},Gr:function(){return p}});var n=r(1413),s=r(5987),o=(r(2791),r(9058)),i=r(6139),a=r(184),l=["touched","error"],c=["input","meta","child"],u=["input","meta","child"],d=function(e){e.input;var t=e.meta,r=t.touched,n=t.error,i=((0,s.Z)(t,l),e.children),c=r&&n;return(0,a.jsxs)("div",{className:o.Z.formControl+" "+(c?o.Z.error:""),children:[(0,a.jsx)("div",{children:i}),c&&(0,a.jsx)("span",{children:n})]})},f=function(e){var t=e.input,r=(e.meta,e.child,(0,s.Z)(e,c));return(0,a.jsx)(d,(0,n.Z)((0,n.Z)({},e),{},{children:(0,a.jsx)("textarea",(0,n.Z)((0,n.Z)({},t),r))}))},h=function(e){var t=e.input,r=(e.meta,e.child,(0,s.Z)(e,u));return(0,a.jsx)(d,(0,n.Z)((0,n.Z)({},e),{},{children:(0,a.jsx)("input",(0,n.Z)((0,n.Z)({className:o.Z.inputStyle},t),r))}))},p=function(e,t,r,s){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,a.jsxs)("div",{className:o.Z.fieldStyle,children:[(0,a.jsx)(i.Z,(0,n.Z)({placeholder:e,name:t,validate:r,component:s},l)),c]})}},5298:function(e,t,r){r.d(t,{C:function(){return n},D:function(){return s}});var n=function(e){if(!e)return"Field is required"},s=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},9058:function(e,t){t.Z={formControl:"FormControls_formControl__A6Htx",error:"FormControls_error__ilB5R",formSummaryError:"FormControls_formSummaryError__BPQTm",inputStyle:"FormControls_inputStyle__xO+zB",fieldStyle:"FormControls_fieldStyle__uqjQG"}},7516:function(e,t,r){e.exports=r.p+"static/media/anonymous-user-flat-icon-vector-18958259.0cacfde43ad9f20a156f.png"},885:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(181);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,o=[],i=!0,a=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(l){a=!0,s=l}finally{try{i||null==r.return||r.return()}finally{if(a)throw s}}return o}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=941.4dd0a7f6.chunk.js.map