"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[587],{4587:function(t,e,r){r.r(e),r.d(e,{default:function(){return T}});var n=r(5671),s=r(3144),o=r(136),i=r(5716),a=r(2791),u=r(7503),l="MyPosts_postsBlock__l6-8N",c="MyPosts_posts__Qgrk3",d={item:"Post_item__RX5g+"},f=r(184),p=function(t){return(0,f.jsx)("div",{className:d.posts,children:(0,f.jsxs)("div",{className:d.item,children:[(0,f.jsx)("img",{src:"https://www.vokrug.tv/pic/product/6/a/0/b/6a0bbf9e1e4b3c4564c562f91c6d43ec.jpeg",alt:"avatar"}),t.message,(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{children:"like"})," ",t.likesCount]})]})})},h=r(6139),m=r(704),v=r(5298),x=r(6854),j=(0,v.D)(10),g=a.memo((function(t){console.log("MyPostsRendered");var e=t.profilePage.posts.map((function(t){return(0,f.jsx)(p,{id:t.id,message:t.message,likesCount:t.likesCount})}));return(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)("h3",{children:"My posts"}),(0,f.jsx)("div",{children:(0,f.jsx)(y,{onSubmit:function(e){t.addMyPost(e.newPostText)}})}),(0,f.jsx)("div",{className:c,children:e})]})})),y=(0,m.Z)({form:"ProfileAddNewPostForm"})((function(t){return(0,f.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,f.jsx)("div",{children:(0,f.jsx)(h.Z,{component:x.gx,name:"newPostText",validate:[v.C,j],placeholder:"Post message"})}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{children:"Add post"})})]})})),P=g,Z=r(364),_=(0,Z.$j)((function(t){return{profilePage:t.profilePage}}),(function(t){return{addMyPost:function(e){t((0,u.Wl)(e))}}}))(P),S="ProfileInfo_descriptionBlock__ApKsI",b="ProfileInfo_mainPhoto__NkNex",k=r(6159),C=r(885),w=function(t){var e=(0,a.useState)(!1),r=(0,C.Z)(e,2),n=r[0],s=r[1],o=(0,a.useState)(t.status),i=(0,C.Z)(o,2),u=i[0],l=i[1];(0,a.useEffect)((function(){l(t.status)}),[t.status]);return(0,f.jsx)("div",{children:n?(0,f.jsx)("div",{children:(0,f.jsx)("input",{autoFocus:!0,value:u,onBlur:function(){s(!n),t.updateUserStatus(u)},onChange:function(t){l(t.currentTarget.value)}})}):(0,f.jsx)("div",{children:(0,f.jsx)("span",{onDoubleClick:function(){s(!n)},children:t.status})})})},U=r(7516),I=function(t){var e=t.isOwner,r=t.profile,n=t.status,s=t.updateUserStatus,o=t.savePhoto;if(!r)return(0,f.jsx)(k.p,{});return(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:S,children:[(0,f.jsx)("img",{src:r.photos.large||U,alt:"ava",className:b}),e&&(0,f.jsx)("input",{type:"file",onChange:function(t){var e;null!==(e=t.target.files)&&void 0!==e&&e.length&&o(t.target.files[0])}}),(0,f.jsx)(w,{status:n,updateUserStatus:s})]})})},N=function(t){return(0,f.jsxs)("div",{children:[(0,f.jsx)(I,{isOwner:t.isOwner,status:t.status,profile:t.profile,updateUserStatus:t.updateUserStatus,savePhoto:t.savePhoto}),(0,f.jsx)(_,{})]})},A=r(9271),M=r(7781),F=function(t){(0,o.Z)(r,t);var e=(0,i.Z)(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,s.Z)(r,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getUserStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,r){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)("div",{children:(0,f.jsx)(N,{isOwner:!this.props.match.params.userId,status:this.props.status,profile:this.props.profile,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto})})}}]),r}(a.Component),T=(0,M.qC)((0,Z.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:u.et,getUserStatus:u.Tq,updateUserStatus:u.OL,savePhoto:u.Ju}),A.EN)(F)},6854:function(t,e,r){r.d(e,{gx:function(){return f},Gr:function(){return h}});var n=r(1413),s=r(5987),o=(r(2791),r(9058)),i=r(6139),a=r(184),u=["touched","error"],l=["input","meta","child"],c=["input","meta","child"],d=function(t){t.input;var e=t.meta,r=e.touched,n=e.error,i=((0,s.Z)(e,u),t.children),l=r&&n;return(0,a.jsxs)("div",{className:o.Z.formControl+" "+(l?o.Z.error:""),children:[(0,a.jsx)("div",{children:i}),l&&(0,a.jsx)("span",{children:n})]})},f=function(t){var e=t.input,r=(t.meta,t.child,(0,s.Z)(t,l));return(0,a.jsx)(d,(0,n.Z)((0,n.Z)({},t),{},{children:(0,a.jsx)("textarea",(0,n.Z)((0,n.Z)({},e),r))}))},p=function(t){var e=t.input,r=(t.meta,t.child,(0,s.Z)(t,c));return(0,a.jsx)(d,(0,n.Z)((0,n.Z)({},t),{},{children:(0,a.jsx)("input",(0,n.Z)((0,n.Z)({},e),r))}))},h=function(t,e,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Z,(0,n.Z)({placeholder:t,name:e,validate:r,component:p},s)),o]})}},5298:function(t,e,r){r.d(e,{C:function(){return n},D:function(){return s}});var n=function(t){if(!t)return"Field is required"},s=function(t){return function(e){if(e.length>t)return"Max length is ".concat(t," symbols")}}},9058:function(t,e){e.Z={formControl:"FormControls_formControl__A6Htx",error:"FormControls_error__ilB5R",formSummaryError:"FormControls_formSummaryError__BPQTm"}},7516:function(t,e,r){t.exports=r.p+"static/media/anonymous-user-flat-icon-vector-18958259.0cacfde43ad9f20a156f.png"},885:function(t,e,r){r.d(e,{Z:function(){return s}});var n=r(181);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,s,o=[],i=!0,a=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(u){a=!0,s=u}finally{try{i||null==r.return||r.return()}finally{if(a)throw s}}return o}}(t,e)||(0,n.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=587.523ca05b.chunk.js.map